<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" 
     th:replace="~{base :: Layout(~{::section})}"
>

<head>
    <meta charset="UTF-8">
    <title>Custom Login Page</title>
</head>

<body>
<section class="loginBanar d-flex justify-content-center align-items-center">

<div class="container">


<div th:if="${otpstatusTrue}"
     class="alert alert-success" role="alert">
    <span th:text="${otpmessage}"></span>
</div>
<div th:if="${otpstatusFalse}"
     class="alert alert-danger" role="alert">
    <span th:text="${otpmessage}"></span>
</div>

<h4 class="text-center">Reset Password</h4>
<div th:if="!${newpasswordform}">
<p class="text-center " style="color:#C2B6B4">OTP will be sent to your registered email</p>


<form th:action="@{/do_resetPassword}" method="post"  th:if="!${otpstatusTrue}" class="otp-form">

  <div class="mb-3">
    <label for="exampleInputEmail1" class="form-label">Email address</label>
    <input type="email" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" name="email"  required >
   
  </div>
  
  
  <br><br>
 

 <div class="text-center">
  <button type="submit" class="btn btn-primary w-100" id="sendOtpBtn">Send OTP</button>
  
  </div>
  
  
</form>



<form th:action="@{/otpverify}" method="post" th:if="${otpstatusTrue}" >
 
  <div class="mb-3">
    <label for="otp" class="form-label">Enter OTP</label>
    <input type="text" class="form-control" id="otp" aria-describedby="otp" name="otp"  required >
   
  </div>
  
  
  <br><br>
 

 <div class="text-center">
  <button type="submit" class="btn btn-primary w-100">Verify OTP</button>
  </div>
</form>
</div>


<form th:action="@{/newpasswordsave}" method="post"  th:if="${newpasswordform}">
 
  <div class="mb-3">
    <label for="otp" class="form-label">New Password</label>
    <input type="password" class="form-control" id="newPassword" aria-describedby="newPassword" name="newPassword"  required >
   
  </div>
  <div class="mb-3">
    <label for="otp" class="form-label">Confirm New Password</label>
    <input type="password" class="form-control" id="confirmNewPassword" aria-describedby="confirmNewPassword" name="confirmNewPassword"  required >
   
  </div>
  
  
  <br><br>
 

 <div class="text-center">
  <button type="submit" class="btn btn-primary w-100">Verify OTP</button>
  </div>
</form>


<!-- ðŸ”¹ Full Page Loader using Bootstrap -->
<div id="pageLoader" class=" d-none position-fixed top-0 start-0 w-100 h-100  d-flex flex-column justify-content-center align-items-center"
style="background-color: rgba(0, 0, 0, 0.4); z-index: 2000;">

  <div class="spinner-border text-primary" style="width: 3rem; height: 3rem;" role="status"></div>
  <p class="mt-3">Please wait...</p>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const loader = document.getElementById("pageLoader");

    document.querySelectorAll("form").forEach(form => {
      form.addEventListener("submit", function () {
        // Show loader only after button is clicked
        loader.classList.remove("d-none");
      });
    });
  });
</script>

</div>
</section>



</body>
</html>
